<ng-template [ngIf]="pricelist">

  <div [hidden]="!pricelist.autoGenerated">
    <p class="bg-warning text-padding">{{ 'PRICELIST_AUTO_TIP' | translate }}</p>
  </div>

  <form role="form" [formGroup]="pricelistForm">
    <tabset>

      <tab heading="{{ 'TAB_MAIN' | translate }}"  (selectTab)="tabSelected('Main')">

        <div>
          <div class="col-md-9 col-lg-6">
            <div class="panel-body">
              <fieldset>
                <div class="form-group">
                  <label>{{ 'CODE' | translate }}</label>
                  <div class="input-group">
                    <input class="form-control" placeholder="{{ 'CODE' | translate }}" formControlName="skuCode" name="skuCode" type="text" [(ngModel)]="pricelist.skuCode"/>
                    <span class="input-group-btn">
                      <button type="button" (click)="onSearchSKU()" class="btn btn-default" [disabled]="pricelist == null || pricelist.skuPriceId > 0">
                        <i class="fa fa-edit"></i>
                      </button>
                      <button type="button" (click)="onSearchSLA()" class="btn btn-default" [disabled]="pricelist == null || pricelist.skuPriceId > 0">
                        <i class="fa fa-truck"></i>
                      </button>
                    </span>
                  </div>
                  <div [hidden]="pricelistForm.controls['skuCode'].valid || pricelistForm.controls['skuCode'].pristine" class="alert alert-danger">
                    {{ 'ALPHANUM_REQUIRED' | translate }}
                  </div>
                </div>

                <div class="form-group">
                  <label>{{ 'NAME' | translate }}</label>
                  <input class="form-control" formControlName="skuName" name="skuName" type="text" [ngModel]="pricelist.skuName" [readonly]="true">
                </div>

                <div class="form-group">
                  <label>{{ 'PRICELIST_QUANTITY' | translate }}</label>
                  <input class="form-control" formControlName="quantity" name="quantity" type="text" [(ngModel)]="pricelist.quantity">
                  <div [hidden]="pricelistForm.controls['quantity'].valid || pricelistForm.controls['quantity'].pristine" class="alert alert-danger">
                    {{ 'POS_DECIMAL_REQUIRED' | translate }}
                  </div>
                </div>

                <div class="form-group">
                  <input formControlName="priceUponRequest" name="priceUponRequest" type="checkbox" [(ngModel)]="pricelist.priceUponRequest">&nbsp;
                  <label>{{ 'PRICELIST_PUR' | translate }}  <i class="fa fa-question-circle" title="{{ 'PRICELIST_PUR_TIP' | translate }}"></i></label>
                </div>

                <div class="form-group">
                  <input formControlName="priceOnOffer" name="priceOnOffer" type="checkbox" [(ngModel)]="pricelist.priceOnOffer">&nbsp;
                  <label>{{ 'PRICELIST_POF' | translate }}  <i class="fa fa-question-circle" title="{{ 'PRICELIST_POF_TIP' | translate }}"></i></label>
                </div>

                <div class="form-group">
                  <label>{{ 'PRICELIST_REGULAR' | translate }}</label>
                  <div class="input-group">
                    <span class="input-group-addon">{{ pricelist.currency }}</span>
                    <input class="form-control" placeholder="{{ 'PRICELIST_REGULAR' | translate }}" formControlName="regularPrice" name="regularPrice" type="text" [(ngModel)]="pricelist.regularPrice">
                  </div>
                  <div [hidden]="pricelistForm.controls['regularPrice'].valid || pricelistForm.controls['regularPrice'].pristine" class="alert alert-danger">
                    {{ 'POS_DECIMAL_REQUIRED' | translate }}
                  </div>
                </div>

                <div class="form-group">
                  <label>{{ 'PRICELIST_SALE' | translate }}</label>
                  <div class="input-group">
                    <span class="input-group-addon">{{ pricelist.currency }}</span>
                    <input class="form-control" placeholder="{{ 'PRICELIST_SALE' | translate }}" formControlName="salePrice" name="salePrice" type="text" [(ngModel)]="pricelist.salePrice">
                  </div>
                  <div [hidden]="pricelistForm.controls['salePrice'].valid || pricelistForm.controls['salePrice'].pristine" class="alert alert-danger">
                    {{ 'POS_DECIMAL_REQUIRED' | translate }}
                  </div>
                </div>

                <div class="form-group">
                  <label>{{ 'PRICELIST_MIN' | translate }}</label>
                  <div class="input-group">
                    <span class="input-group-addon">{{ pricelist.currency }}</span>
                    <input class="form-control" placeholder="{{ 'PRICELIST_MIN' | translate }}" formControlName="minimalPrice" name="minimalPrice" type="text" [(ngModel)]="pricelist.minimalPrice">
                  </div>
                  <div [hidden]="pricelistForm.controls['minimalPrice'].valid || pricelistForm.controls['minimalPrice'].pristine" class="alert alert-danger">
                    {{ 'POS_DECIMAL_REQUIRED' | translate }}
                  </div>
                </div>

              </fieldset>
            </div>

          </div>
        </div>

      </tab>

      <tab heading="{{ 'PRICELIST_POLICY' | translate }}"  (selectTab)="tabSelected('Policy')">

        <div class="panel-body">

          <div class="row">
            <div class="col-md-9 col-lg-6">
              <fieldset>

                <div class="form-group">
                  <label>{{ 'PRICELIST_POLICY' | translate }} <i class="fa fa-question-circle" title="{{ 'PRICELIST_POLICY_TIP' | translate }}"></i></label>
                  <input class="form-control" formControlName="pricingPolicy" name="pricingPolicy" type="text" [(ngModel)]="pricelist.pricingPolicy">
                  <div [hidden]="pricelistForm.controls['pricingPolicy'].valid || pricelistForm.controls['pricingPolicy'].pristine" class="alert alert-danger">
                    {{ 'ALPHANUM_REQUIRED' | translate }}
                  </div>
                </div>

                <div class="form-group">
                  <label>{{ 'PRICELIST_REF' | translate }} <i class="fa fa-question-circle" title="{{ 'PRICELIST_REF_TIP' | translate }}"></i></label>
                  <input class="form-control" formControlName="ref" name="ref" type="text" [(ngModel)]="pricelist.ref">
                  <div [hidden]="pricelistForm.controls['ref'].valid || pricelistForm.controls['ref'].pristine" class="alert alert-danger">
                    {{ 'NON_BLANK_TRIMMED_REQUIRED' | translate }}
                  </div>
                </div>

                <div class="form-group">
                  <label>{{ 'PRICELIST_SUPPLIER' | translate }} <i class="fa fa-question-circle" title="{{ 'PRICELIST_SUPPLIER_TIP' | translate }}"></i></label>
                  <div class="input-group">
                    <input class="form-control" placeholder="{{ 'PRICELIST_SUPPLIER' | translate }}" formControlName="supplier" name="supplier" type="text" [(ngModel)]="pricelist.supplier"/>
                    <span class="input-group-btn">
                      <button type="button" (click)="onSearchFC()" class="btn btn-default">
                        <i class="fa fa-edit"></i>
                      </button>
                    </span>
                  </div>
                  <div [hidden]="pricelistForm.controls['supplier'].valid || pricelistForm.controls['supplier'].pristine" class="alert alert-danger">
                    {{ 'ALPHANUM_REQUIRED' | translate }}
                  </div>

                </div>

                <cw-datetime title="{{ 'PRICELIST_FROM' | translate }}" [value]="pricelist.salefrom" (dataChanged)="onAvailableFrom($event)"></cw-datetime>

                <cw-datetime title="{{ 'PRICELIST_TO' | translate }}" [value]="pricelist.saleto" (dataChanged)="onAvailableTo($event)"></cw-datetime>


              </fieldset>
            </div>
          </div>

        </div>

      </tab>

      <tab heading="{{ 'TAB_SEARCH' | translate }}"  (selectTab)="tabSelected('Search')">

        <div class="panel-body">

          <div class="row">
            <div class="col-md-9 col-lg-6">
              <fieldset>
                <div class="form-group">
                  <label>{{ 'PRICELIST_TAG' | translate }}</label>
                  <input class="form-control" placeholder="{{ 'PRICELIST_TAG' | translate }}" formControlName="tag" name="tag" type="text" [(ngModel)]="pricelist.tag">
                  <div [hidden]="pricelistForm.controls['tag'].valid || pricelistForm.controls['tag'].pristine" class="alert alert-danger">
                    {{ 'TAGS_REQUIRED' | translate }}
                  </div>
                </div>
              </fieldset>
            </div>
          </div>
        </div>

      </tab>

      <tab  heading="{{ 'TAB_AUDIT' | translate }}" (selectTab)="tabSelected('Audit')">

        <div class="row">
          <div class="col-xs-12">
            <div class="panel-body">
              <div class="row">
                <div class="col-xs-4"><strong>{{ 'CREATED' | translate }}</strong></div>
                <div class="col-xs-8">{{ pricelist.createdTimestamp | cwdatetime }} {{ pricelist.createdBy }}</div>
              </div>
              <div class="row">
                <div class="col-xs-4"><strong>{{ 'UPDATED' | translate }}</strong></div>
                <div class="col-xs-8">{{ pricelist.updatedTimestamp | cwdatetime }} {{ pricelist.updatedBy }}</div>
              </div>
            </div>
          </div>
        </div>

      </tab>


    </tabset>
  </form>

</ng-template>

<cw-product-sku-select #productSkuSelectDialog (dataSelected)="onProductSkuSelected($event)"></cw-product-sku-select>

<cw-carrier-sla-select #carrierSlaSelectDialog (dataSelected)="onCarrierSlaSelected($event)"></cw-carrier-sla-select>

<cw-fulfilment-centre-select #selectCentreModalDialog (dataSelected)="onFulfilmentCentreSelected($event)"></cw-fulfilment-centre-select>
